extends layout

block javascript
	script(src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js")
	script(src="javascripts/jquery.alphanum.js")

block content
	h1 SiSSYFiGHT 2000&frac12;
	if (user)
		p= 'hello ' + user.nickname + '!'
		p: form(method='post',action='/user/logout')
			input(type='submit', value='log out')
			
		a(href='/game/') go to the game
			
	else
		h2 login
		if (flash && flash.login)
			div.errorFlash= flash.login
		form(method='post',action='/user/login')
			label(for='nickname') nickname
			input(class='nickname', name='nickname', maxlength=13, value=(loginAttempt ? loginAttempt.nickname : ""))
			br
			label(for='password') password
			input(type='password', name='password')
			br
			input(type='submit', value='log in')
			
			
		h2 register
		if (flash && flash.newUser)
			div.errorFlash= flash.newUser
		form(method='post',action='/user/new')
			label(for='nickname') nickname
			input(class='nickname', name='nickname', maxlength=13)
			br
			label(for='password') password
			input(type='password', name='password')		
			//
				br
				label(for='password2') password again, just in case
				input(type='password', name='password2')
			br
			input(type='submit', value="I'm new!")
			
		h2 Welcome to the beta of SiSSYFiGHT!

		p <B>To get started,</B> register with any name and password you like. If someone isn't already using it for this beta test, you're good to go! These accounts won't be around past the beta period, but if you need to leave and come back during the beta, you should be able to use the name and password you registered with.

		p <B>Remember: this is a beta!</B> You'll probably discover that some things aren't working yet, or at least not how you'd expect them to. There are many features from classic SiSSYFiGHT, as well as new additions, that we haven't developed yet. These include the ability to create your own game rooms -- so for now, please play in one of the pre-made game rooms.

		p <B>Send us your bug reports.</B> If you do notice something strange or broken about how the game's working, <A HREF="https://docs.google.com/forms/d/1lLWMiJlPY2hu5SJhrNUeacD--9F_wtsIEHiddGl18UQ/viewform" target='_blank'>please click here to fill out a bug report,</A> and be sure to include details about your browser and system. That information will help us track the problems down and bring SiSSYFiGHT closer to completion!

		p <B>If you haven't played before,</B> take a look at <A HREF="http://halfrobot.com/sissyfight/testhelp.html" target='_blank'>our help page.</A> There's a guide at the top to help you get started!


	script.
		$('.nickname').alphanum({
			allow              : "#$%*?+/&!'1234567890",   // Allow extra characters
			disallow           : '',   // Disallow extra characters
			allowSpace         : true, // Allow the space character
			allowNumeric       : true, // Allow digits 0-9
			allowUpper         : true, // Allow upper case characters
			allowLower         : true, // Allow lower case characters
			allowCaseless      : false, // Allow characters that don't have both upper & lower variants - eg Arabic or Chinese
			allowLatin         : true, // a-z A-Z
			allowOtherCharSets : false, // eg é, Á, Arabic, Chinese etc
			disallowLeadingSpace : true,
			disallowTrailingSpace : true,
			maxLength          : '13'    // eg Max Length
		});